(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2543:function(e,t,l){Promise.resolve().then(l.bind(l,7689))},7689:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Home}});var n=l(7437),o=l(2265),a=l(4748);let s=(0,o.createContext)(null),i=(0,o.createContext)();var Home_GoogleMapSection=function(){let e={width:"100%",height:.45*window.innerWidth},{source:t,setSource:l}=(0,o.useContext)(s),{destination:r,setDestination:c}=(0,o.useContext)(i),[d,m]=(0,o.useState)({lat:-3.745,lng:-38.523}),[g,u]=o.useState(null),[p,x]=(0,o.useState)([]);(0,o.useEffect)(()=>{(null==t?void 0:t.length)!=[]&&g&&(g.panTo({lat:t.lat,lng:t.lng}),m({lat:t.lat,lng:t.lng})),t.length!=[]&&r.length!=[]&&(console.log("DIE"),directionRoute())},[t]);let{isLoaded:h}=(0,a.Ji)({id:"google-map-script",googleMapsApiKey:"AIzaSyAXN1PpEYQlAqrh7bwUZXomXOiR_6A1-MU"});(0,o.useEffect)(()=>{(null==r?void 0:r.length)!=[]&&g&&m({lat:r.lat,lng:r.lng}),t.length!=[]&&r.length!=[]&&(console.log("DIE"),directionRoute())},[r]);let directionRoute=()=>{let e=new google.maps.DirectionsService;console.log("DIE"),e.route({origin:{lat:t.lat,lng:t.lng},destination:{lat:r.lat,lng:r.lng},travelMode:google.maps.TravelMode.DRIVING},(e,t)=>{t===google.maps.DirectionsStatus.OK?x(e):console.error("Error")})};return(0,n.jsxs)(a.b6,{mapContainerStyle:e,center:d,zoom:11,onLoad:e=>u(e),options:{mapId:"d4e9328ecf0482f4"},children:[t.lenght!=[]?(0,n.jsx)(a.jC,{position:{lat:t.lat,lng:t.lng},icon:{url:"/source.png",scaledSize:{width:20,height:20}},children:(0,n.jsx)(a.Rj,{position:{lat:t.lat,lng:t.lng},mapPaneName:a.xT.OVERLAY_MOUSE_TARGET,children:(0,n.jsx)("div",{className:"p-2 bg-white font-bold inline-block",children:(0,n.jsx)("p",{className:"text-black text-[18px]",children:t.label})})})}):null,r.lenght!=[]?(0,n.jsx)(a.jC,{position:{lat:r.lat,lng:r.lng},icon:{url:"/dest.png",scaledSize:{width:20,height:20}},children:(0,n.jsx)(a.Rj,{position:{lat:r.lat,lng:r.lng},mapPaneName:a.xT.OVERLAY_MOUSE_TARGET,children:(0,n.jsx)("div",{className:"p-2 bg-white font-bold inline-block",children:(0,n.jsx)("p",{className:"text-black text-[18px]",children:r.label})})})}):null,(0,n.jsx)(a.tH,{directions:p,options:{polylineOptions:{strokeColor:"#000",strokeWeight:5},suppressMarkers:!0}})]})},r=l(6691),c=l.n(r),d=l(214),Home_InputItem=function(e){let{type:t}=e,[l,a]=(0,o.useState)(null),[r,m]=(0,o.useState)(null),{source:g,setSource:u}=(0,o.useContext)(s),{destination:p,setDestination:x}=(0,o.useContext)(i);(0,o.useEffect)(()=>{"source"==t?m("Pickup Location"):m("Dropoff Location")},[]);let getLatAndLng=(e,t)=>{let l=e.value.place_id,n=new google.maps.places.PlacesService(document.createElement("div"));n.getDetails({placeId:l},(e,l)=>{"OK"===l&&e.geometry&&e.geometry.location&&(console.log(e.geometry.location.lng()),"source"==t?u({lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),name:e.formatted_address,label:e.name}):(console.log("Des"),x({lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),name:e.formatted_address,label:e.name})))})};return(0,n.jsxs)("div",{className:"bg-slate-200 p-3 px-3 rounded-lg mt-6  flex items-center gap-4",children:[(0,n.jsx)(c(),{src:"source"==t?"/source.png":"/dest.png",width:15,height:15}),(0,n.jsx)(d.ZP,{apiKey:"AIzaSyAXN1PpEYQlAqrh7bwUZXomXOiR_6A1-MU",selectProps:{value:l,onChange:e=>{getLatAndLng(e,t),a(e)},placeholder:"Pickup Location",isClearable:!0,className:"w-full",components:{DropdownIndicator:!1},styles:{control:e=>({...e,backgroundColor:"#00ffff00",border:"none"})}}})]})};let m=[{id:1,name:"Uber X",seat:4,desc:"Affordable, Everyday rides",amount:4,image:"/UberX_v1.png"},{id:2,name:"Comfort",seat:4,desc:"Newer cars with extra legroom",amount:5,image:"/UberComfort.png"},{id:3,name:"UberXL",seat:6,desc:"Affordable rides for groups up to 6",amount:4.5,image:"/UberXL_New.png"},{id:4,name:"Uber Pet",seat:4,desc:"Affordable rides for you and your pet",amount:4.5,image:"/UberX_Pet.png"},{id:5,name:"Black",seat:4,desc:"Affordable, Everyday rides",amount:3.5,image:"/Black_v1.png"}];var g=l(1824),Home_CarListItem=function(e){let{car:t,distance:l}=e;return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center justify-between mt-5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-5",children:[(0,n.jsx)(c(),{src:t.image,width:100,height:100}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"font-semibold text-[18px] flex gap-3 items-center",children:[t.name,(0,n.jsxs)("span",{className:"flex gap-2 font-normal text-[14px] items-center",children:[(0,n.jsx)(g._K$,{}),t.seat]})]}),(0,n.jsx)("p",{children:t.desc})]})]}),(0,n.jsxs)("h2",{className:"text-[18px] font-semibold",children:["\xa3",(t.amount*l).toFixed(2)]})]})})},u=l(4033),Home_CarListOptions=function(e){let{distance:t}=e,[l,a]=(0,o.useState)(),[s,i]=(0,o.useState)([]),r=(0,u.useRouter)();return(0,n.jsxs)("div",{className:"mt-5 p-5 overflow-auto h-[250px]",children:[(0,n.jsx)("h2",{className:"text-[22px] font-bold",children:"Recommeded"}),m.map((e,o)=>(0,n.jsx)("div",{className:"cursor-pointer p-2 px-4 rounded-md\n            border-black\n            ".concat(l==o?"border-[3px]":null),onClick:()=>{a(o),i(e)},children:(0,n.jsx)(Home_CarListItem,{car:e,distance:t})},o)),(null==s?void 0:s.name)?(0,n.jsxs)("div",{className:"flex justify-between fixed  bottom-5 bg-white p-3 shadow-xl rounded-lg w-full md:w-[30%] border-[1px] items-center",children:[(0,n.jsx)("h2",{children:"Make Payment For"}),(0,n.jsxs)("button",{className:" p-3 bg-black text-white rounded-lg text-center",onClick:()=>r.push("/payment?amount="+(s.amount*t).toFixed(2)),children:["Request ",s.name]})]}):null]})},Home_SearchSection=function(){let{source:e,setSource:t}=(0,o.useContext)(s),{destination:l,setDestination:a}=(0,o.useContext)(i),[r,c]=(0,o.useState)(),calculateDistance=()=>{console.log();let t=google.maps.geometry.spherical.computeDistanceBetween({lat:parseFloat(e.lat),lng:parseFloat(e.lng)},{lat:parseFloat(l.lat),lng:parseFloat(l.lng)});console.log(621374e-9*t),c(621374e-9*t)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"p-2 md:p-6  border-[2px] rounded-xl",children:[(0,n.jsx)("p",{className:"text-[20px] font-bold",children:"Get a ride"}),(0,n.jsx)(Home_InputItem,{type:"source"}),(0,n.jsx)(Home_InputItem,{type:"destination"}),(0,n.jsx)("button",{className:" p-4 bg-black w-full mt-5  text-white rounded-lg",onClick:()=>calculateDistance(),children:"Search"})]}),r?(0,n.jsx)(Home_CarListOptions,{distance:r}):null]})};function Home(){let[e,t]=(0,o.useState)([]),[l,r]=(0,o.useState)([]);return(0,n.jsx)(s.Provider,{value:{source:e,setSource:t},children:(0,n.jsx)(i.Provider,{value:{destination:l,setDestination:r},children:(0,n.jsx)(a.KJ,{libraries:["places"],googleMapsApiKey:"AIzaSyAXN1PpEYQlAqrh7bwUZXomXOiR_6A1-MU",children:(0,n.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(Home_SearchSection,{})}),(0,n.jsx)("div",{className:"col-span-2",children:(0,n.jsx)(Home_GoogleMapSection,{})})]})})})})}}},function(e){e.O(0,[61,910,321,458,971,472,744],function(){return e(e.s=2543)}),_N_E=e.O()}]);